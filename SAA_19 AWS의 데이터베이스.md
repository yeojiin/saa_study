### DB 선택
- RDBMS 데이터베이스
	- SQL을 사용하거나 온라인 트랜잭션을 처리할 때 사용
	- RDS, Aurora 같은 데이터베이스가 해당되며 조인에 유용
- NoSQL 데이터베이스
	- 유연한 데이터베이스이지만 조인 기능이 없고 일반적으로 SQL 쿼리 언어를 사용하지 않음
	- DynamoDB, ElastiCache, Neptune DocumentDB, Keyspaces 등
- 객체 스토어 데이터베이스
	- 대용량 객체 저장용 Amazon S3나 백업, 아카이브용 Glacier가 여기에 포함
	- 데이터 웨어하우스는 SQL 분석이나 비즈니스 인텔리전스(BI)를 사용
	- OLAP(Online Analytical Processing) 유형의 데이터베이스인 Redshift와 Athena, EMR이 포합
		- OLAP(Online Analytical Processing)는 데이터 웨어하우스, 데이터 마트 또는 기타 중앙화된 통합 데이터 저장소의 대용량 데이터를 고속으로 다차원 분석하는 소프트웨어
- 검색 유형의 데이터베이스
	- OpenSearch 데이터베이스에서는 자유롭게 텍스트를 입력하거나 비정형 데이터를 검색 가능
- 그래프 데이터베이스는 데이터 세트 간의 관계를 표시
	- Amazon Neptune
- 원장(Ledger) 데이터베이스
	- 트랜잭션 목록과 원장을 기록 가능
	- Amazon QLDB(퀀텀 원장 데이터베이스)
- 시계열 데이터베이스
	- Amazon Timestream
### RDS
- Amazon RDS
	- 관리형 PostgreSQL, MySQL Oracle, SQL 서버, MariaDB용 및 사용자 지정 RDS
	- Amazon RDS를 사용할 때는 RDS 인스턴스 크기와 EBS 볼륨 유형 및 크기를 프로비저닝해야 함
	- 스토리지 계층에 오토 스케일링 기능이 있어도 프로비저닝 해야 함
	- 읽기 용량 확장을 위해 읽기 전용 복제본을 지원
	- 프로덕션 데이터베이스에 대해 분석을 실행해야 하는 애플리케이션은 읽기 전용 복제본을 생성하면 효율적
	- 고가용성 목적으로 대기 데이터베이스를 다중 AZ 사용 가능
	- 대기 데이터베이스는 재해 발생 대비용이며 쿼리를 수행 불가
-  RDS 데이터베이스 보안
	- **IAM로 설정**
	- 사용자 이름과 비밀번호로 DB에 연결할 수 있게 하거나 일부 사용자에게 IAM 인증을 부여할 수 있음
	- 네트워크 보안을 위해 Amazon RDS DB에 보안 그룹을 설정 가능
	- 저장 데이터 암호화에는 KMS, 전송 데이터 암호화에는 SSL과 TLS를 사용할 수 있음
	- 자동 백업 옵션은 최대 35일까지 지원
	- 최근 35일 내에는 지정 시간 복구 기능을 지원하고 복구 시 새 데이터베이스가 생성됨
	- 장기 보존 백업이 필요한 경우에는 수동 DB 스냅샷을 사용
- 유지 관리 기능을 예약할 수 있기 때문에 데이터베이스 다운타임이 발생할 수 있으므로 프로비저닝하거나 AWS가 데이터베이스 엔진을 주기적으로 업데이트하고, 기본 EC2 인스턴스에 보안 패치를 실행할 때 발생 가능
- RDS 프록시를 강제하여 RDS에 IAM 인증을 추가 가능
- Secrets Manager와 통합하여 DB 자격 증명을 관리 가능
- 기본 인스턴스에 액세스하고 사용자 지정하려면 RDS 사용자 지정 옵션을 사용 가능
- Oracle, SQL 서버 유형의 데이터베이스에서 지원
- Amazon RDS는 관계형 데이터베이스를 저장하는 데 활용
- RDBMS와 온라인 트랜잭션 처리 데이터베이스(OLTP)가 포함되며 SQL 쿼리를 실행할 수도 있고 트랜잭션에도 활용
### Amazon Aurora
- Aurora는 데이터베이스 엔진인 PostgreSQL, MySQL과 호환되는 API
- 컴퓨팅과 스토리지가 분리된 특별한 서비스
- 스토리지의 경우 기본적으로 데이터를 **세 가용 영역에** 걸쳐 여섯 개의 복제본에 저장 -> 변경 불가, 가용성이 높음
- 스토리지에 문제가 발생하면 백그라운드에서 자가 복구
- 오토 스케일링이 기능이 내장돼 있어 스토리지 확장 용이
- 컴퓨팅의 경우 클러스터화된 실제 데이터베이스 인스턴스를 여러 가용 영역에 걸쳐 저장
- 읽기 전용 복제본이 있다면 로드가 증가할 때 오토 스케일링을 통해 늘릴 수 있음
- 데이터베이스 인스턴스 클러스터가 있으므로 `라이터(writer) 엔드 포인트`와 `리더(reader) 엔드 포인트`가 필요함
- Aurora는 RDS와 동일한 보안 모니터링, 유지 관리 기능 지원
- Aurora의 백업 및 복구 옵션 -> 중요
- Aurora 추가 기능
	- Aurora Serverless는 워크로드가 간헐적이거나 예측할 수 없는 경우 **용량 계획 불필요**
	- 쓰기 고가용성을 위해 쓰기 장애 조치가 지속해서 필요할 때 Aurora Multi-Master를 사용하면 DB 인스턴스 여러 개가 스토리지에 쓰기를 할 수 있도록 설정할 수 있음
	- 글로벌 데이터베이스를 원할 땐 Aurora Global 사용
	- 데이터베이스가 복제된 리전마다 최대 16개의 데이터베이스 읽기 전용 인스턴스를 제공하고, 리전 간 복제에 걸리는 시간은 일반적으로 1초 미만
	- 기본 리전에 문제가 발생하면 보조 리전을 새 기본 리전으로 승격할 수 있음
	- Aurora Machine Learning 모듈을 사용하면 SageMaker와 Comprehend를 사용해 Aurora에서 머신 러닝을 수행 가능
	- 프로덕션 데이터베이스로부터 테스트 데이터 베이스나 스테이징 데이터베이스를 만들려면 Aurora Database Cloning 기능을 사용해 기존 클러스터에서 새 Aurora 클러스터를 만들 수 있음 -> 스냅샷을 사용해서 복구하는 것보다 훨씬 빠름
	- Aurora의 사용 사례는 RDS와 같지만 Aurora는 유지 관리할 게 적고, 유연성은 높으며 성능이 더좋고 기능도 더 많음
### ElastiCache
- Amazon ElastiCache는 관리형 Redis/Memcached로 **캐싱에** 용이
- ElastiCache는 인 메모리 데이터 스토어로 데이터를 읽을 때 1밀리초 미만의 지연 시간을 제공
- 캐시를 위한 EC2 인스턴스 유형을 프로비저닝해야 진행 가능
- Redis용에서는 클러스터 생성, 다중 AZ와 샤딩을 위한 읽기 전용 복제본을 사용할 수 있음
- IAM을 통해 프로비저닝한 보안과 보안 그룹을 사용할 수 있고, 저장 데이터 암호화를 위한 KMS와 Redis 인증을 사용 가능
- 백업 및 스냅샷 지정 시간 복구 같은 기능을 사용 가능
- 관리형 및 예약된 유지 관리가 가능
- Amazon ElastiCache를 사용해 RDS가 결합된 데이터베이스에서 캐싱 작업을 수행하려면 **애플리케이션 코드가 ElastiCache를 활용하도록** 코드를 수정 필요
- 코드 변경이 필요 없는 캐싱 솔루션은? -> ElastiCache는 선택하면 안 됨
- ElastiCache의 사용 사례에는 키-값 스토어가 있고, 데이터베이스를 자주 읽는다면 데이터베이스 쿼리를 캐싱하는 게 좋음
- 웹사이트 사용자를 위해 세션 데이터를 저장할 수 있음
- ElastiCache에선 SQL을 사용할 수 없음
###  DynamoDB
- DynamoDB는 AWS의 고유 자산인 기술
- 밀리 초 단위의 지연시간을 제공하는 관리형 서버리스 NoSQL 데이터베이스
- 용량 모드
	- 오토 스케일링이 제공되는 프로비저닝된 용량
		- 시간이 지나면서 점진적으로 증가하거나 감소하는 매끄러운 유형의 워크로드가 있을 경우에 적합
	- 온디맨드 용량 모드
		- 용량을 프로비저닝할 필요가 없지만 자동으로 스케일링 됨
		- 워크로드가 아주 예측하기 어렵거나 데이터베이스에 대한 수요가 갑자기 가파르게 상승하는 경우에 사용하면 좋음
- 키 값 저장소로 ElastiCache를 대체할 수 있음
	- 여러분의 웹사이트를 위해 세션 데이터 저장하기 좋으며 TTL 기능이 있어서 일정한 기간 뒤에 행을 만료시킬 수 있음
- 가용성이 아주 높음 -> 기본값으로서 다수의 가용성 영역에 걸쳐 읽기와 쓰기가 완전히 분리되어 있고, DynamoDB 테이블 외에도 트랜잭션을 가짐
- DynamoDB와 완벽히 호환되는 완성품 형태의 읽기 캐시를 만들 수 있음 -> DAX 클러스터, 즉 DynamoDB 액셀러레이터
	- 마이크로 초 단위의 읽기 레이턴시를 얻을 수 있음
- 보안과 인증, 승인 등 모든 게 IAM을 이용
- 이벤트 처리 능력은  DynamoDB Streams를 활성화해서 데이터베이스에 일어나는 모든 변경사항을 스트리밍할 수 있고, DynamoDB Streams에서 람다를 호출하도록 통합할 수도 있음
	- DynamoDB 테이블의 모든 변경사항에 대해 람다를 호출할 수 있음
- 데이터를 DynamoDB Streams에 전송하는 대신에 Kinesis Data Streams에 전송 가능
	- Kinesis Data Firehose 기능을 활용하거나 Kinesis Data Stream을 활용하는 어떤 종류의 통합 가능 
		- 예를 들면 Kinesis Data Streams에서 최장 1년 동안의 장기 보관이 가능
- DynamoDB 이외에 글로벌 테이블 기능도 갖게 됨 -> 다수의 리전에 걸쳐 active-active 복제를 할 수 있고, 누구나 어느 리전에서나 읽기와 쓰기 가능
- 백업 옵션
	- 자동 백업
		- PITR(restore to new table)을 활성화 필요, 최장 35일까지 새로운 DynamoDB 테이블로 복구 가능
		- 백업을 장기간 보관하려면 온디맨드 백업을 활성화 가능
		- PITR 기간 안에, 즉 35일 안에S3로 내보내기 기능을 이용해서 읽기 용량을 전혀 사용하지 않고도 DynamoDB 테이블을 Amazon S3로 내보낼 수 있음
		- 쓰기 용량을 전혀 사용하지 않고도 S3로부터 새로운 테이블로 가져올 수도 있음
-  빠르게 스키마를 변경(rapidly evolve schema)해야 하거나 유연한 타입의 데이터베이스 스키마가 필요하다면 DynamoDB 선택
- DynamoDB의 활용 사례
	- 서버리스 애플리케이션 개발을 하는데 DB가 필요한 경우 
	- 데이터가 작은 문서들, 예를 들어 최대 수백 킬로바이트이거나 분산형 서버리스 캐시가 필요한 경우
### S3
- S3는 객체를 키-값으로 저장하므로 큰 객체를 저장할 때는 유용하지만 여러 개의 작은 객체를 저장할 때는 유용하지 않음
- 서버리스이므로 확장성이 무한
- 객체의 최대 크기는 5TB이며 시간 경과에 따라 계속 버저닝
- 스토리지 계층도 다양
	- S3 Standard, Infrequent Access Intelligent와 Glacier가 있으며 계층을 전환하려면 수명 주기 정책을 사용
- **버저닝, 암호화, 복제**
- 멀티 팩터 인증(MFA) 삭제와 액세스 로그 있음
- 보안 기능에는 IAM 보안이 있음
- S3 버킷에 버킷 정책을 생성할 수도 있고, ACL 기능도 제공
- Amazon S3에 액세스 포인트를 생성할 수도 있음
- S3 Object Lambda를 사용해 객체를 애플리케이션에 전송하기 전에 수정할 수도 있음
- CORS 정책도 있음
- **Glacier의 객체 잠금 또는 볼트 잠금 개념**
- 암호화 메커니즘
	- SSE-S3, 자체 KMS 키를 가져올 수 있는 SSE-KMS
	- SSE-C, 클라이언트 측 암호화 전송 중 TLS 암호화
- S3 버킷에 기본 암호화 체계를 설정할 수 있고, Amazon S3 버킷에 있는 모든 파일을 한 번에 작업하려면 S3 Batch를 사용해 **배치 작업**을 하면 유용
	- 기존 Amazon S3 버킷의 비암호화 객체를 암호화한다거나 S3 복제를 활성화하기 전에 기존 파일을 다른 버킷으로 복사할 때 유용
- 파일 목록은 S3 인벤토리를 사용해 생성할 수 있음
- Amazon S3의 향상된 성능에는 파일을 병렬식으로 업로드할 수 있는 **멀티파트 업로드**가 있음
- S3 전송 가속화를 통해 S3 파일을 한 리전에서 다른 리전으로 더 빠르게 전송할 수 있음
- S3 Select로 Amazon S3에서 필요한 데이터만 검색할 수도 있음
- 자동화 관련해서는 S3 Event Notifications가 있음
- SNS, SQS, Lambda EvnetBridge 인터페이스가 있어 예를 들면 Amazon S3 버킷에서 새로운 객체가 생성되는 이벤트에 사용 가능
- Amazon S3의 사용 사례
	- 정적 파일
	- 큰 파일의 키-값 스토어 
	- 웹사이트 호스팅
### DocumentDB
- Aurora를 AWS에서 PostgreSQL과 MySQL의 대규모 클라우드 네이티브 버전을 구현하는 것과 비슷
- DocumentDB는 몽고DB용 Aurora
- DocumentDB는 NoSQL 데이터베이스, 몽고DB 기술을 기반 -> 몽고DB와 호환
- 몽고DB는 JSON 데이터를 저장, 쿼리, 인덱스하는 데 사용
- DocumentDB에도 Aurora와 같은 배포 개념이 있음
- 완전 관리형 데이터베이스예요, 가용성이 높음
- 데이터는 3개의 가용 영역에 복제되며, 스토리지는 자동으로 10GB 단위로 최대 64TB까지 증가
- DocumentDB는 초당 수백만 건의 요청이 있는 워크로드로 확장될 수 있도록 설계됨
- 몽고DB 관련 내용이 보이면 DocumentDB
- NoSQL 데이터베이스와 관련된 내용이 나오면 DocumentDB와 DynamoDB
###  Neptune
- Neptune은 완전 관리형 그래프 데이터베이스
- 그래프 데이터 셋
	- 소셜 네트워크를 보면 사람들은 친구를 맺고, 좋아요를 누르고, 연결되고, 댓글을 읽는 등은 서로 연결되고 그래프를 만듦
	- `그래프 데이터 셋`에서는 Neptune을 데이터베이스로 선택
- Neptune은 3 AZ에 걸쳐 최대 15개의 읽기 전용 복제본으로 복제
- Neptune은 소셜 네트워크처럼 고도로 연결된 데이터 셋을 사용하는 애플리케이션을 구축하고, 실행하는 데 사용
- Neptune은 그래프 데이터 셋에서 복잡하고 어려운 쿼리를 실행하기에 최적화
- 데이터베이스에 최대 수십억 개의 관계를 저장할 수 있고, 그래프를 쿼리할 때 지연시간은 밀리초
- 여러 가용 영역에 걸친 애플리케이션에서도 매우 가용성이 높으며 지식 그래프를 저장에 용이
- 예를 들어 모든 위키피디아 기사들은 서로 연결되어 있어, 위키피디아 데이터베이스, 사기 탐지, 추천 엔진, 소셜 네트워킹는 **지식 그래프**
- 그래프 데이터베이스와 관련된 게 나오면 Neptune
###  Keyspaces (for Apache Cassandra)
- Keyspaces는 AWS의 관리형 Apache Cassandra를 보조
- Cassandra는 오픈 소스 NoSQL 분산 데이터베이스
- Keyspaces를 사용하면 클라우드에서 AWS가 Cassandra를 직접 관리
- 서버리스 서비스이며 확장성과 가용성이 높으며 AWS 완전 관리형
- 애플리케이션 트래픽에 따라 테이블을 자동으로 확장/축소
- 테이블 데이터는 여러 AZ에 걸쳐 세 번 복제
- Keyspaces에서 쿼리를 수행하려면 Cassandra 쿼리 언어(CQL)을 사용
- 지연 시간이 10밀리초 미만으로 짧고, 초당 수천 건의 요청을 처리
- DynamoDB처럼 두 가지 용량 모드
	- 온디맨드 모드
	- 크기가 자동 조정되는 프로비저닝 모드
- 암호화와 백업 기능을 제공, 최대 35일까지 지정 시간 복구가 가능
- 사용 사례로는 IoT 장치 정보와 시계열 데이터 저장 등
- Apache Cassandra는 Amazon Keyspaces가 관련되어 있음
### QLDB
- 퀀텀 레저 데이터베이스(Quantum Ledger Database)의 약자
- 원장(Ledger)은 금융 트랜잭션을 기록하는 장부
- QLDB는 금융 트랜잭션 원장을 갖게 됨
- 완전 관리형 데이터베이스이며, 서버리스, 가용성이 높음, 3개의 가용 영역에 걸쳐 데이터를 복제 가능
- 애플리케이션 데이터의 시간에 따른 모든 변경 내역을 검토하는 데 사용
- 불변 시스템 -> 데이터베이스에 무언가를 쓰면, 삭제하거나 수정할 수 없음(immutable)
	- 내부적으로 저널이 있어 암호화 서명을 하기도 함
- 저널에는 수정 시퀀스가 있음
- 수정이 일어날 때마다, 암호화 해시가 계산됨
- 아무 것도 삭제되거나 수정되지 않도록 보장
- 데이터베이스를 사용하는 모든 사람이 확인 가능
- 금융 트랜잭션에 매우 유용 -> 어떤 금융 트랜잭션도 데이터베이스에서 보존
- 일반 원장 블록체인 프레임워크보다 2-3배 더 나은 성능
- SQL을 사용하여 데이터를 관리 가능
- Amazon 관리형 블록체인이라는 또다른 데이터베이스 기술도 있음
- QLDB와 관리형 블록체인의 차이점은, QLDB에는 `탈중앙화 개념이 없음`
	- 즉, Amazon 소유의 중앙 데이터베이스에서만 저널을 작성할 수 있음
	- QLDB와 관리형 블록체인의 차이점은, QLDB에는 중앙 권한 구성 요소가 있다는 것 -> 원장
	- 관리형 블록체인에는 탈중앙화 구성 요소도 있음
- 금융 트랜잭션이나 원장이 나오면 QLDB
### Timestream
- 시계열 데이터베이스
- 완전 관리형이며 빠르고 확장성 있는 서버리스 서비스
- 시계열이란?
	- 시간 정보를 포함하는 포인트의 모음
- Timestream를 사용하면 데이터베이스의 용량을 자동으로 확장, 축소할 수 있고, 매일 수조 건의 이벤트를 저장 및 분석 가능
- 시계열 데이터가 있을 때는 관계형 데이터베이스보다 시계열 데이터베이스를 사용하는 것이 훨씬 빠르고 저렴
- 쿼리를 예약하고 다중 척도 레코드도 얻을 수 있음
- SQL과도 호환
- 최신 데이터는 메모리에 저장되고, 과거 데이터는 비용 효율적인 스토리지 계층에 저장
- 시계열 분석 기능이 있어 거의 실시간으로 데이터를 분석하고 패턴을 찾을 수 있음
- 전송 중 데이터와 저장 데이터의 암호화를 지원
- Timestream의 사용 사례로는 IoT 애플리케이션, 운영 애플리케이션, 실시간 분석 등
- Timestream은 AWS IoT 즉, 사물 인터넷에서 데이터를 받을 수 있고, Kinesis Data Streams의 데이터도 Lambda를 통해 받을 수 있음
- Prometheus, telegraf와 통합할 수 있음
- Apache Flink용 Kinesis Data Analytics는 Kinesis Data Stream과 Amazon MSK의 데이터를 Amazon Timestream에 전달
- Timestream과 연결 가능한 것으로는 대시보드를 빌드할 수 있는 Amazon Quicksight, 기계 학습을 할 수 있는 Amazon SageMaker, Grafana 등
- 데이터베이스에 표준 JDBC가 연결돼 있으므로 JDBC, SQL과 호환 가능한 애플리케이션은 Amazon Timestream을 활용할 수 있음
